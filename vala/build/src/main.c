/* main.c generated by valac 0.34.8, the Vala compiler
 * generated from main.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <float.h>
#include <math.h>
#include <mt19937ar.h>
#include <stdlib.h>
#include <string.h>
#include <SDL2/SDL.h>
#include <SDL2/SDL_image.h>
#include <SDL2/SDL_hints.h>
#include <SDL2/SDL_ttf.h>
#include <SDL2/SDL_video.h>
#include <SDL2/SDL_render.h>
#include <android/log.h>
#include <SDL2/SDL_timer.h>
#include <SDL2/SDL_events.h>
#include <SDL2/SDL_surface.h>
#include <SDL2/SDL_pixels.h>

#define _SDL_DestroyWindow0(var) ((var == NULL) ? NULL : (var = (SDL_DestroyWindow (var), NULL)))
#define _SDL_DestroyRenderer0(var) ((var == NULL) ? NULL : (var = (SDL_DestroyRenderer (var), NULL)))
typedef struct _Sprite Sprite;
void sprite_release (Sprite* self);
void sprite_free (Sprite* self);
Sprite* sprite_retain (Sprite* self);
#define _sprite_release0(var) ((var == NULL) ? NULL : (var = (sprite_release (var), NULL)))
typedef struct _utilFile utilFile;
typedef struct _Text Text;
void text_release (Text* self);
void text_free (Text* self);
Text* text_retain (Text* self);
#define _text_release0(var) ((var == NULL) ? NULL : (var = (text_release (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
void util_file_release (utilFile* self);
void util_file_free (utilFile* self);
utilFile* util_file_retain (utilFile* self);
#define _util_file_release0(var) ((var == NULL) ? NULL : (var = (util_file_release (var), NULL)))
typedef struct _Zed Zed;
#define _SDL_FreeSurface0(var) ((var == NULL) ? NULL : (var = (SDL_FreeSurface (var), NULL)))

typedef enum  {
	SDL_EXCEPTION_Initialization,
	SDL_EXCEPTION_ImageInitialization,
	SDL_EXCEPTION_TtfInitialization,
	SDL_EXCEPTION_TextureFilteringNotEnabled,
	SDL_EXCEPTION_OpenWindow,
	SDL_EXCEPTION_CreateRenderer
} SdlException;
#define SDL_EXCEPTION sdl_exception_quark ()
struct _Sprite {
	gint _retainCount;
	SDL_Texture* texture;
	guint16 w;
	guint16 h;
};

struct _Text {
	gint _retainCount;
	SDL_Texture* texture;
	SDL_Surface* surface;
	TTF_Font* font;
	guint16 w;
	guint16 h;
};

struct _Zed {
	gint _retainCount;
};



GQuark sdl_exception_quark (void);
#define PF 1
gdouble getRandom (void);
gint _vala_main (const gchar* args, int args_length1);
void sprite_free (Sprite* self);
Sprite* sprite_new (const gchar* file, SDL_Renderer* renderer);
void util_file_free (utilFile* self);
utilFile* util_file_new (const gchar* path);
gchar* util_file_read (utilFile* self);
void text_free (Text* self);
Text* text_new (const gchar* text, SDL_Renderer* renderer);
void zed_free (Zed* self);
static void zed_instance_init (Zed * self);
Zed* zed_retain (Zed* self);
void zed_release (Zed* self);
void zed_free (Zed* self);
Zed* zed_new (const gchar* file, SDL_Renderer* renderer);

extern const SDL_Color SDX_COLOR_LightSteelBlue;

GQuark sdl_exception_quark (void) {
	return g_quark_from_static_string ("sdl_exception-quark");
}


gdouble getRandom (void) {
	gdouble result = 0.0;
	gdouble _tmp0_ = 0.0;
	_tmp0_ = genrand_real2 ();
	result = _tmp0_;
	return result;
}


gint _vala_main (const gchar* args, int args_length1) {
	gint result = 0;
	gint _tmp0_ = 0;
	gint _tmp4_ = 0;
	gboolean _tmp8_ = FALSE;
	gint _tmp12_ = 0;
	SDL_Window* window = NULL;
	SDL_Renderer* renderer = NULL;
	SDL_Window* _tmp16_ = NULL;
	SDL_Renderer* _tmp17_ = NULL;
	gint _tmp18_ = 0;
	Sprite* sprite = NULL;
	SDL_Renderer* _tmp19_ = NULL;
	Sprite* _tmp20_ = NULL;
	Sprite* _tmp21_ = NULL;
	SDL_Texture* _tmp22_ = NULL;
	utilFile* file = NULL;
	utilFile* _tmp23_ = NULL;
	gchar* data = NULL;
	utilFile* _tmp24_ = NULL;
	gchar* _tmp25_ = NULL;
	const gchar* _tmp26_ = NULL;
	guint64 _tmp27_ = 0ULL;
	gchar* str = NULL;
	gdouble _tmp28_ = 0.0;
	gchar* _tmp29_ = NULL;
	const gchar* _tmp30_ = NULL;
	Text* text = NULL;
	const gchar* _tmp31_ = NULL;
	SDL_Renderer* _tmp32_ = NULL;
	Text* _tmp33_ = NULL;
	gboolean done = FALSE;
	SDL_Event event = {0};
	GError * _inner_error_ = NULL;
	_tmp0_ = SDL_Init ((guint32) ((SDL_INIT_VIDEO | SDL_INIT_TIMER) | SDL_INIT_EVENTS));
	if (_tmp0_ < 0) {
		const gchar* _tmp1_ = NULL;
		GError* _tmp2_ = NULL;
		gint _tmp3_ = 0;
		_tmp1_ = SDL_GetError ();
		_tmp2_ = g_error_new_literal (SDL_EXCEPTION, SDL_EXCEPTION_Initialization, _tmp1_);
		_inner_error_ = _tmp2_;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return _tmp3_;
	}
	_tmp4_ = IMG_Init ((gint) IMG_INIT_PNG);
	if (_tmp4_ < 0) {
		const gchar* _tmp5_ = NULL;
		GError* _tmp6_ = NULL;
		gint _tmp7_ = 0;
		_tmp5_ = SDL_GetError ();
		_tmp6_ = g_error_new_literal (SDL_EXCEPTION, SDL_EXCEPTION_ImageInitialization, _tmp5_);
		_inner_error_ = _tmp6_;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return _tmp7_;
	}
	_tmp8_ = SDL_SetHint (SDL_HINT_RENDER_SCALE_QUALITY, "1");
	if (!_tmp8_) {
		const gchar* _tmp9_ = NULL;
		GError* _tmp10_ = NULL;
		gint _tmp11_ = 0;
		_tmp9_ = SDL_GetError ();
		_tmp10_ = g_error_new_literal (SDL_EXCEPTION, SDL_EXCEPTION_TextureFilteringNotEnabled, _tmp9_);
		_inner_error_ = _tmp10_;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return _tmp11_;
	}
	_tmp12_ = TTF_Init ();
	if (_tmp12_ == -1) {
		const gchar* _tmp13_ = NULL;
		GError* _tmp14_ = NULL;
		gint _tmp15_ = 0;
		_tmp13_ = SDL_GetError ();
		_tmp14_ = g_error_new_literal (SDL_EXCEPTION, SDL_EXCEPTION_TtfInitialization, _tmp13_);
		_inner_error_ = _tmp14_;
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return _tmp15_;
	}
	_tmp18_ = SDL_CreateWindowAndRenderer (380, 580, (guint32) 0, &_tmp16_, &_tmp17_);
	_SDL_DestroyWindow0 (window);
	window = _tmp16_;
	_SDL_DestroyRenderer0 (renderer);
	renderer = _tmp17_;
	if (_tmp18_ < 0) {
		result = 2;
		_SDL_DestroyRenderer0 (renderer);
		_SDL_DestroyWindow0 (window);
		return result;
	}
	_tmp19_ = renderer;
	_tmp20_ = sprite_new ("assets/images/background.png", _tmp19_);
	sprite = _tmp20_;
	_tmp21_ = sprite;
	_tmp22_ = _tmp21_->texture;
	if (_tmp22_ == NULL) {
		result = 2;
		_sprite_release0 (sprite);
		_SDL_DestroyRenderer0 (renderer);
		_SDL_DestroyWindow0 (window);
		return result;
	}
	__android_log_write (ANDROID_LOG_ERROR, "frodo", "====================");
	_tmp23_ = util_file_new ("assets/frodo.txt");
	file = _tmp23_;
	_tmp24_ = file;
	_tmp25_ = util_file_read (_tmp24_);
	data = _tmp25_;
	_tmp26_ = data;
	__android_log_write (ANDROID_LOG_ERROR, "frodo", _tmp26_);
	__android_log_write (ANDROID_LOG_ERROR, "frodo", "====================");
	_tmp27_ = SDL_GetPerformanceCounter ();
	init_genrand ((gulong) _tmp27_);
	_tmp28_ = getRandom ();
	_tmp29_ = g_strdup_printf ("Hey %f", _tmp28_);
	str = _tmp29_;
	_tmp30_ = str;
	__android_log_write (ANDROID_LOG_ERROR, "Hello", _tmp30_);
	_tmp31_ = str;
	_tmp32_ = renderer;
	_tmp33_ = text_new (_tmp31_, _tmp32_);
	text = _tmp33_;
	done = FALSE;
	while (TRUE) {
		gboolean _tmp34_ = FALSE;
		SDL_Event _tmp35_ = {0};
		Text* _tmp47_ = NULL;
		SDL_Texture* _tmp48_ = NULL;
		SDL_Renderer* _tmp55_ = NULL;
		SDL_Renderer* _tmp56_ = NULL;
		Text* _tmp57_ = NULL;
		SDL_Texture* _tmp58_ = NULL;
		Text* _tmp59_ = NULL;
		guint16 _tmp60_ = 0U;
		Text* _tmp61_ = NULL;
		guint16 _tmp62_ = 0U;
		SDL_Rect _tmp63_ = {0};
		SDL_Renderer* _tmp64_ = NULL;
		_tmp34_ = done;
		if (!(!_tmp34_)) {
			break;
		}
		SDL_WaitEvent (&_tmp35_);
		 (event);
		event = _tmp35_;
		{
			gboolean _tmp36_ = FALSE;
			_tmp36_ = TRUE;
			while (TRUE) {
				gboolean _tmp39_ = FALSE;
				gboolean _tmp40_ = FALSE;
				SDL_Event _tmp41_ = {0};
				SDL_EventType _tmp42_ = 0;
				if (!_tmp36_) {
					SDL_Event _tmp37_ = {0};
					gint _tmp38_ = 0;
					_tmp38_ = SDL_PollEvent (&_tmp37_);
					 (event);
					event = _tmp37_;
					if (!(_tmp38_ > 0)) {
						break;
					}
				}
				_tmp36_ = FALSE;
				_tmp41_ = event;
				_tmp42_ = _tmp41_.type;
				if (_tmp42_ == SDL_QUIT) {
					_tmp40_ = TRUE;
				} else {
					SDL_Event _tmp43_ = {0};
					SDL_EventType _tmp44_ = 0;
					_tmp43_ = event;
					_tmp44_ = _tmp43_.type;
					_tmp40_ = _tmp44_ == SDL_KEYDOWN;
				}
				if (_tmp40_) {
					_tmp39_ = TRUE;
				} else {
					SDL_Event _tmp45_ = {0};
					SDL_EventType _tmp46_ = 0;
					_tmp45_ = event;
					_tmp46_ = _tmp45_.type;
					_tmp39_ = _tmp46_ == SDL_FINGERDOWN;
				}
				if (_tmp39_) {
					done = TRUE;
				}
			}
		}
		_tmp47_ = text;
		_tmp48_ = _tmp47_->texture;
		if (_tmp48_ == NULL) {
			SDL_Renderer* _tmp49_ = NULL;
			_tmp49_ = renderer;
			SDL_SetRenderDrawColor (_tmp49_, (guint8) 0x00, (guint8) 0x00, (guint8) 0xff, (guint8) 0xFF);
		} else {
			SDL_Renderer* _tmp50_ = NULL;
			guint8 _tmp51_ = 0U;
			guint8 _tmp52_ = 0U;
			guint8 _tmp53_ = 0U;
			guint8 _tmp54_ = 0U;
			_tmp50_ = renderer;
			_tmp51_ = SDX_COLOR_LightSteelBlue.r;
			_tmp52_ = SDX_COLOR_LightSteelBlue.g;
			_tmp53_ = SDX_COLOR_LightSteelBlue.b;
			_tmp54_ = SDX_COLOR_LightSteelBlue.a;
			SDL_SetRenderDrawColor (_tmp50_, _tmp51_, _tmp52_, _tmp53_, _tmp54_);
		}
		_tmp55_ = renderer;
		SDL_RenderClear (_tmp55_);
		_tmp56_ = renderer;
		_tmp57_ = text;
		_tmp58_ = _tmp57_->texture;
		_tmp59_ = text;
		_tmp60_ = _tmp59_->w;
		_tmp61_ = text;
		_tmp62_ = _tmp61_->h;
		_tmp63_.x = 100 * PF;
		_tmp63_.y = 100 * PF;
		_tmp63_.w = (guint) (_tmp60_ * PF);
		_tmp63_.h = (guint) (_tmp62_ * PF);
		SDL_RenderCopy (_tmp56_, _tmp58_, NULL, &_tmp63_);
		_tmp64_ = renderer;
		SDL_RenderPresent (_tmp64_);
	}
	result = 0;
	 (event);
	_text_release0 (text);
	_g_free0 (str);
	_g_free0 (data);
	_util_file_release0 (file);
	_sprite_release0 (sprite);
	_SDL_DestroyRenderer0 (renderer);
	_SDL_DestroyWindow0 (window);
	return result;
}


int main (int argc, char ** argv) {
#if !GLIB_CHECK_VERSION (2,35,0)
	g_type_init ();
#endif
	return _vala_main (argv, argc);
}


Zed* zed_retain (Zed* self) {
	Zed* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_atomic_int_add ((volatile gint *) (&self->_retainCount), 1);
	result = self;
	return result;
}


void zed_release (Zed* self) {
	gboolean _tmp0_ = FALSE;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_atomic_int_dec_and_test ((volatile gint *) (&self->_retainCount));
	if (_tmp0_) {
		zed_free (self);
	}
}


Zed* zed_new (const gchar* file, SDL_Renderer* renderer) {
	Zed* self;
	SDL_Surface* never = NULL;
	const gchar* _tmp0_ = NULL;
	SDL_Surface* _tmp1_ = NULL;
	g_return_val_if_fail (file != NULL, NULL);
	g_return_val_if_fail (renderer != NULL, NULL);
	self = g_slice_new0 (Zed);
	zed_instance_init (self);
	_tmp0_ = file;
	_tmp1_ = IMG_Load (_tmp0_);
	never = _tmp1_;
	_SDL_FreeSurface0 (never);
	return self;
}


static void zed_instance_init (Zed * self) {
	self->_retainCount = 1;
}


void zed_free (Zed* self) {
	g_slice_free (Zed, self);
}



