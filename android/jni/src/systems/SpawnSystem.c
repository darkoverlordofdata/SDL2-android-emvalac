/** updated by emvalac */
/* SpawnSystem.c generated by valac 0.34.8, the Vala compiler
 * generated from SpawnSystem.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <float.h>
#include <math.h>
#include <stdlib.h>
#include <string.h>
#include <SDL2/SDL_rect.h>

typedef struct _entitasSystem entitasSystem;
typedef entitasSystem systemsSpawnSystem;
typedef struct _sdxAbstractGame sdxAbstractGame;
typedef sdxAbstractGame Game;
typedef struct _entitasWorld entitasWorld;
typedef entitasWorld Factory;
void sdx_abstract_game_release (sdxAbstractGame* self);
void sdx_abstract_game_free (sdxAbstractGame* self);
sdxAbstractGame* sdx_abstract_game_retain (sdxAbstractGame* self);
#define _sdx_abstract_game_release0(var) ((var == NULL) ? NULL : (var = (sdx_abstract_game_release (var), NULL)))
void entitas_world_release (entitasWorld* self);
void entitas_world_free (entitasWorld* self);
entitasWorld* entitas_world_retain (entitasWorld* self);
#define _entitas_world_release0(var) ((var == NULL) ? NULL : (var = (entitas_world_release (var), NULL)))
typedef struct _Block9Data Block9Data;
void entitas_system_release (entitasSystem* self);
void entitas_system_free (entitasSystem* self);
entitasSystem* entitas_system_retain (entitasSystem* self);
#define _entitas_system_release0(var) ((var == NULL) ? NULL : (var = (entitas_system_release (var), NULL)))

#define ENTITAS_TYPE_ENTITY (entitas_entity_get_type ())

#define ENTITAS_TYPE_TRANSFORM (entitas_transform_get_type ())

#define SDX_MATH_TYPE_VECTOR2 (sdx_math_vector2_get_type ())
typedef struct _sdxmathVector2 sdxmathVector2;
typedef struct _sdxgraphicsSprite sdxgraphicsSprite;
typedef struct _entitasTransform entitasTransform;

#define ENTITAS_TYPE_BACKGROUND (entitas_background_get_type ())
typedef struct _entitasBackground entitasBackground;

#define ENTITAS_TYPE_BULLET (entitas_bullet_get_type ())
typedef struct _entitasBullet entitasBullet;

#define ENTITAS_TYPE_ENEMY1 (entitas_enemy1_get_type ())
typedef struct _entitasEnemy1 entitasEnemy1;

#define ENTITAS_TYPE_ENEMY2 (entitas_enemy2_get_type ())
typedef struct _entitasEnemy2 entitasEnemy2;

#define ENTITAS_TYPE_ENEMY3 (entitas_enemy3_get_type ())
typedef struct _entitasEnemy3 entitasEnemy3;

#define ENTITAS_TYPE_EXPIRES (entitas_expires_get_type ())
typedef struct _entitasExpires entitasExpires;

#define ENTITAS_TYPE_HEALTH (entitas_health_get_type ())
typedef struct _entitasHealth entitasHealth;

#define ENTITAS_TYPE_HUD (entitas_hud_get_type ())
typedef struct _entitasHud entitasHud;

#define ENTITAS_TYPE_INDEX (entitas_index_get_type ())
typedef struct _entitasIndex entitasIndex;

#define ENTITAS_TYPE_LAYER (entitas_layer_get_type ())
typedef struct _entitasLayer entitasLayer;

#define ENTITAS_TYPE_SOUND (entitas_sound_get_type ())
typedef struct _sdxaudioSound sdxaudioSound;
typedef struct _entitasSound entitasSound;

#define ENTITAS_TYPE_TEXT (entitas_text_get_type ())
typedef sdxgraphicsSprite sdxgraphicsSpriteTextSprite;
typedef struct _entitasText entitasText;

#define ENTITAS_TYPE_TINT (entitas_tint_get_type ())
typedef struct _entitasTint entitasTint;

#define ENTITAS_TYPE_TWEEN (entitas_tween_get_type ())
typedef struct _entitasTween entitasTween;

#define ENTITAS_TYPE_VELOCITY (entitas_velocity_get_type ())
typedef struct _entitasVelocity entitasVelocity;
typedef struct _entitasEntity entitasEntity;

typedef void (*entitasSystemInitialize) (void* user_data);
typedef void (*entitasSystemExecute) (gfloat delta, void* user_data);
struct _entitasSystem {
	gint _retainCount;
	entitasSystemInitialize initialize;
	gpointer initialize_target;
	GDestroyNotify initialize_target_destroy_notify;
	entitasSystemExecute execute;
	gpointer execute_target;
	GDestroyNotify execute_target_destroy_notify;
};

typedef gfloat (*systemsSpawnSystemSpawnEnemy) (gfloat delta, gfloat t, gint enemy, void* user_data);
struct _Block9Data {
	int _ref_count_;
	systemsSpawnSystem* self;
	gfloat enemyT1;
	gfloat enemyT2;
	gfloat enemyT3;
	systemsSpawnSystemSpawnEnemy spawnEnemy;
	gpointer spawnEnemy_target;
	GDestroyNotify spawnEnemy_target_destroy_notify;
	Game* game;
	Factory* world;
};

typedef void (*sdxAbstractGameAbstractUpdate) (void* user_data);
typedef void (*sdxAbstractGameAbstractDraw) (void* user_data);
struct _sdxAbstractGame {
	gint _retainCount;
	gint width;
	gint height;
	sdxAbstractGameAbstractUpdate update;
	gpointer update_target;
	GDestroyNotify update_target_destroy_notify;
	sdxAbstractGameAbstractDraw draw;
	gpointer draw_target;
	GDestroyNotify draw_target_destroy_notify;
};

struct _sdxmathVector2 {
	gfloat x;
	gfloat y;
};

struct _entitasTransform {
	sdxmathVector2* scale;
	sdxmathVector2* position;
	SDL_Rect* aabb;
	sdxgraphicsSprite* sprite;
};

struct _entitasBackground {
	gboolean active;
};

struct _entitasBullet {
	gboolean active;
};

struct _entitasEnemy1 {
	gboolean active;
};

struct _entitasEnemy2 {
	gboolean active;
};

struct _entitasEnemy3 {
	gboolean active;
};

struct _entitasExpires {
	gfloat value;
};

struct _entitasHealth {
	gfloat current;
	gfloat maximum;
};

struct _entitasHud {
	gboolean active;
};

struct _entitasIndex {
	gint value;
	gint limit;
	gboolean vertical;
};

struct _entitasLayer {
	gint value;
};

struct _entitasSound {
	sdxaudioSound* sound;
};

struct _entitasText {
	gchar* text;
	sdxgraphicsSpriteTextSprite* sprite;
};

struct _entitasTint {
	gint r;
	gint g;
	gint b;
	gint a;
};

struct _entitasTween {
	gfloat min;
	gfloat max;
	gfloat speed;
	gboolean repeat;
	gboolean active;
};

struct _entitasVelocity {
	gfloat x;
	gfloat y;
};

struct _entitasEntity {
	gint id;
	gchar* name;
	gint pool;
	guint64 mask;
	entitasTransform transform;
	entitasBackground* background;
	entitasBullet* bullet;
	entitasEnemy1* enemy1;
	entitasEnemy2* enemy2;
	entitasEnemy3* enemy3;
	entitasExpires* expires;
	entitasHealth* health;
	entitasHud* hud;
	entitasIndex* index;
	entitasLayer* layer;
	entitasSound* sound;
	entitasText* text;
	entitasTint* tint;
	entitasTween* tween;
	entitasVelocity* velocity;
};



void entitas_system_free (entitasSystem* self);
void sdx_abstract_game_free (sdxAbstractGame* self);
void entitas_world_free (entitasWorld* self);
systemsSpawnSystem* systems_spawn_system_new (Game* game, Factory* world);
static Block9Data* block9_data_ref (Block9Data* _data9_);
static void block9_data_unref (void * _userdata_);
entitasSystem* entitas_system_new (void);
static gfloat __lambda8_ (Block9Data* _data9_, gfloat delta, gfloat t, gint enemy);
gdouble sdx_getRandom (void);
GType entitas_entity_get_type (void) G_GNUC_CONST;
GType entitas_transform_get_type (void) G_GNUC_CONST;
GType sdx_math_vector2_get_type (void) G_GNUC_CONST;
sdxmathVector2* sdx_math_vector2_dup (const sdxmathVector2* self);
void sdx_math_vector2_free (sdxmathVector2* self);
void sdx_graphics_sprite_free (sdxgraphicsSprite* self);
entitasTransform* entitas_transform_dup (const entitasTransform* self);
void entitas_transform_free (entitasTransform* self);
void entitas_transform_copy (const entitasTransform* self, entitasTransform* dest);
void entitas_transform_destroy (entitasTransform* self);
GType entitas_background_get_type (void) G_GNUC_CONST;
entitasBackground* entitas_background_dup (const entitasBackground* self);
void entitas_background_free (entitasBackground* self);
GType entitas_bullet_get_type (void) G_GNUC_CONST;
entitasBullet* entitas_bullet_dup (const entitasBullet* self);
void entitas_bullet_free (entitasBullet* self);
GType entitas_enemy1_get_type (void) G_GNUC_CONST;
entitasEnemy1* entitas_enemy1_dup (const entitasEnemy1* self);
void entitas_enemy1_free (entitasEnemy1* self);
GType entitas_enemy2_get_type (void) G_GNUC_CONST;
entitasEnemy2* entitas_enemy2_dup (const entitasEnemy2* self);
void entitas_enemy2_free (entitasEnemy2* self);
GType entitas_enemy3_get_type (void) G_GNUC_CONST;
entitasEnemy3* entitas_enemy3_dup (const entitasEnemy3* self);
void entitas_enemy3_free (entitasEnemy3* self);
GType entitas_expires_get_type (void) G_GNUC_CONST;
entitasExpires* entitas_expires_dup (const entitasExpires* self);
void entitas_expires_free (entitasExpires* self);
GType entitas_health_get_type (void) G_GNUC_CONST;
entitasHealth* entitas_health_dup (const entitasHealth* self);
void entitas_health_free (entitasHealth* self);
GType entitas_hud_get_type (void) G_GNUC_CONST;
entitasHud* entitas_hud_dup (const entitasHud* self);
void entitas_hud_free (entitasHud* self);
GType entitas_index_get_type (void) G_GNUC_CONST;
entitasIndex* entitas_index_dup (const entitasIndex* self);
void entitas_index_free (entitasIndex* self);
GType entitas_layer_get_type (void) G_GNUC_CONST;
entitasLayer* entitas_layer_dup (const entitasLayer* self);
void entitas_layer_free (entitasLayer* self);
GType entitas_sound_get_type (void) G_GNUC_CONST;
void sdx_audio_sound_free (sdxaudioSound* self);
entitasSound* entitas_sound_dup (const entitasSound* self);
void entitas_sound_free (entitasSound* self);
void entitas_sound_copy (const entitasSound* self, entitasSound* dest);
void entitas_sound_destroy (entitasSound* self);
GType entitas_text_get_type (void) G_GNUC_CONST;
entitasText* entitas_text_dup (const entitasText* self);
void entitas_text_free (entitasText* self);
void entitas_text_copy (const entitasText* self, entitasText* dest);
void entitas_text_destroy (entitasText* self);
GType entitas_tint_get_type (void) G_GNUC_CONST;
entitasTint* entitas_tint_dup (const entitasTint* self);
void entitas_tint_free (entitasTint* self);
GType entitas_tween_get_type (void) G_GNUC_CONST;
entitasTween* entitas_tween_dup (const entitasTween* self);
void entitas_tween_free (entitasTween* self);
GType entitas_velocity_get_type (void) G_GNUC_CONST;
entitasVelocity* entitas_velocity_dup (const entitasVelocity* self);
void entitas_velocity_free (entitasVelocity* self);
entitasEntity* entitas_entity_dup (const entitasEntity* self);
void entitas_entity_free (entitasEntity* self);
void entitas_entity_copy (const entitasEntity* self, entitasEntity* dest);
void entitas_entity_destroy (entitasEntity* self);
entitasEntity* factory_enemy1 (Factory* self, gint x, gint y);
entitasEntity* factory_enemy2 (Factory* self, gint x, gint y);
entitasEntity* factory_enemy3 (Factory* self, gint x, gint y);
static gfloat ___lambda8__systems_spawn_system_spawn_enemy (gfloat delta, gfloat t, gint enemy, gpointer self);
static void __lambda9_ (Block9Data* _data9_, gfloat delta);
static void ___lambda9__entitas_system_execute (gfloat delta, gpointer self);


static gpointer _sdx_abstract_game_retain0 (gpointer self) {
	return self ? sdx_abstract_game_retain (self) : NULL;
}


static gpointer _entitas_world_retain0 (gpointer self) {
	return self ? entitas_world_retain (self) : NULL;
}


static Block9Data* block9_data_ref (Block9Data* _data9_) {
	g_atomic_int_inc (&_data9_->_ref_count_);
	return _data9_;
}


static void block9_data_unref (void * _userdata_) {
	Block9Data* _data9_;
	_data9_ = (Block9Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data9_->_ref_count_)) {
		systemsSpawnSystem* self;
		self = _data9_->self;
		(_data9_->spawnEnemy_target_destroy_notify == NULL) ? NULL : (_data9_->spawnEnemy_target_destroy_notify (_data9_->spawnEnemy_target), NULL);
		_data9_->spawnEnemy = NULL;
		_data9_->spawnEnemy_target = NULL;
		_data9_->spawnEnemy_target_destroy_notify = NULL;
		_sdx_abstract_game_release0 (_data9_->game);
		_entitas_world_release0 (_data9_->world);
		_entitas_system_release0 (self);
		g_slice_free (Block9Data, _data9_);
	}
}


static gfloat __lambda8_ (Block9Data* _data9_, gfloat delta, gfloat t, gint enemy) {
	systemsSpawnSystem* self;
	gfloat result = 0.0F;
	gfloat d1 = 0.0F;
	gfloat _tmp0_ = 0.0F;
	gfloat _tmp1_ = 0.0F;
	gfloat _tmp2_ = 0.0F;
	self = _data9_->self;
	_tmp0_ = t;
	_tmp1_ = delta;
	d1 = _tmp0_ - _tmp1_;
	_tmp2_ = d1;
	if (((gdouble) _tmp2_) < 0.0) {
		gint _tmp3_ = 0;
		_tmp3_ = enemy;
		switch (_tmp3_) {
			case 1:
			{
				gint x = 0;
				gdouble _tmp4_ = 0.0;
				Game* _tmp5_ = NULL;
				gint _tmp6_ = 0;
				Factory* _tmp7_ = NULL;
				gint _tmp8_ = 0;
				_tmp4_ = sdx_getRandom ();
				_tmp5_ = _data9_->game;
				_tmp6_ = ((sdxAbstractGame*) _tmp5_)->width;
				x = ((gint) (_tmp4_ * (_tmp6_ - 70))) + 35;
				_tmp7_ = _data9_->world;
				_tmp8_ = x;
				factory_enemy1 (_tmp7_, _tmp8_, -35);
				result = (gfloat) 1;
				return result;
			}
			case 2:
			{
				gint x = 0;
				gdouble _tmp9_ = 0.0;
				Game* _tmp10_ = NULL;
				gint _tmp11_ = 0;
				Factory* _tmp12_ = NULL;
				gint _tmp13_ = 0;
				_tmp9_ = sdx_getRandom ();
				_tmp10_ = _data9_->game;
				_tmp11_ = ((sdxAbstractGame*) _tmp10_)->width;
				x = ((gint) (_tmp9_ * (_tmp11_ - 172))) + 85;
				_tmp12_ = _data9_->world;
				_tmp13_ = x;
				factory_enemy2 (_tmp12_, _tmp13_, -85);
				result = (gfloat) 4;
				return result;
			}
			case 3:
			{
				gint x = 0;
				gdouble _tmp14_ = 0.0;
				Game* _tmp15_ = NULL;
				gint _tmp16_ = 0;
				Factory* _tmp17_ = NULL;
				gint _tmp18_ = 0;
				_tmp14_ = sdx_getRandom ();
				_tmp15_ = _data9_->game;
				_tmp16_ = ((sdxAbstractGame*) _tmp15_)->width;
				x = ((gint) (_tmp14_ * (_tmp16_ - 320))) + 160;
				_tmp17_ = _data9_->world;
				_tmp18_ = x;
				factory_enemy3 (_tmp17_, _tmp18_, -160);
				result = (gfloat) 6;
				return result;
			}
			default:
			{
				result = (gfloat) 0;
				return result;
			}
		}
	} else {
		result = d1;
		return result;
	}
}


static gfloat ___lambda8__systems_spawn_system_spawn_enemy (gfloat delta, gfloat t, gint enemy, gpointer self) {
	gfloat result;
	result = __lambda8_ (self, delta, t, enemy);
	return result;
}


static void __lambda9_ (Block9Data* _data9_, gfloat delta) {
	systemsSpawnSystem* self;
	gfloat _tmp0_ = 0.0F;
	gfloat _tmp1_ = 0.0F;
	gfloat _tmp2_ = 0.0F;
	gfloat _tmp3_ = 0.0F;
	gfloat _tmp4_ = 0.0F;
	gfloat _tmp5_ = 0.0F;
	self = _data9_->self;
	_tmp0_ = delta;
	_tmp1_ = _data9_->spawnEnemy (_tmp0_, _data9_->enemyT1, 1, _data9_->spawnEnemy_target);
	_data9_->enemyT1 = _tmp1_;
	_tmp2_ = delta;
	_tmp3_ = _data9_->spawnEnemy (_tmp2_, _data9_->enemyT2, 2, _data9_->spawnEnemy_target);
	_data9_->enemyT2 = _tmp3_;
	_tmp4_ = delta;
	_tmp5_ = _data9_->spawnEnemy (_tmp4_, _data9_->enemyT3, 3, _data9_->spawnEnemy_target);
	_data9_->enemyT3 = _tmp5_;
}


static void ___lambda9__entitas_system_execute (gfloat delta, gpointer self) {
	__lambda9_ (self, delta);
}


systemsSpawnSystem* systems_spawn_system_new (Game* game, Factory* world) {
	systemsSpawnSystem* self;
	Block9Data* _data9_;
	Game* _tmp0_ = NULL;
	Game* _tmp1_ = NULL;
	Factory* _tmp2_ = NULL;
	Factory* _tmp3_ = NULL;
	g_return_val_if_fail (game != NULL, NULL);
	g_return_val_if_fail (world != NULL, NULL);
	_data9_ = g_slice_new0 (Block9Data);
	_data9_->_ref_count_ = 1;
	_tmp0_ = game;
	_tmp1_ = _sdx_abstract_game_retain0 (_tmp0_);
	_sdx_abstract_game_release0 (_data9_->game);
	_data9_->game = _tmp1_;
	_tmp2_ = world;
	_tmp3_ = _entitas_world_retain0 (_tmp2_);
	_entitas_world_release0 (_data9_->world);
	_data9_->world = _tmp3_;
	self = (systemsSpawnSystem*) entitas_system_new ();
	_data9_->self = entitas_system_retain (self);
	_data9_->enemyT1 = 1.0f;
	_data9_->enemyT2 = 4.0f;
	_data9_->enemyT3 = 6.0f;
	_data9_->spawnEnemy = ___lambda8__systems_spawn_system_spawn_enemy;
	_data9_->spawnEnemy_target = block9_data_ref (_data9_);
	_data9_->spawnEnemy_target_destroy_notify = block9_data_unref;
	(((entitasSystem*) self)->execute_target_destroy_notify == NULL) ? NULL : (((entitasSystem*) self)->execute_target_destroy_notify (((entitasSystem*) self)->execute_target), NULL);
	((entitasSystem*) self)->execute = NULL;
	((entitasSystem*) self)->execute_target = NULL;
	((entitasSystem*) self)->execute_target_destroy_notify = NULL;
	((entitasSystem*) self)->execute = ___lambda9__entitas_system_execute;
	((entitasSystem*) self)->execute_target = block9_data_ref (_data9_);
	((entitasSystem*) self)->execute_target_destroy_notify = block9_data_unref;
	block9_data_unref (_data9_);
	_data9_ = NULL;
	return self;
}



